{"ast":null,"code":"import _slicedToArray from\"/home/ubuntu/project/crio_stage_2_b/frontend-meme/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import axios from'axios';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PatchFrom=function PatchFrom(_ref){var id=_ref.id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),caption=_useState2[0],setCaption=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),imageUrl=_useState4[0],setImageUrl=_useState4[1];var history=useHistory();var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),reqError=_useState6[0],setReqError=_useState6[1];//const url = 'http://localhost:8000/memes/'\nvar url='http://ec2-3-7-45-215.ap-south-1.compute.amazonaws.com:8000/memes/';var handleSubmit=function handleSubmit(e){e.preventDefault();var payload={\"caption\":caption,\"image_url\":imageUrl};console.log(payload);axios.patch(url+id,payload).then(function(response){console.log(response);setTimeout(function(){history.go(0);},500);}).catch(function(error){console.log(error.response);setReqError(error.response.status+' '+error.response.statusText);});};return/*#__PURE__*/_jsxs(\"section\",{className:\"section-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Patch Meme\"}),/*#__PURE__*/_jsx(\"div\",{className:\"underline\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"smaller-input\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Caption \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"caption\",value:caption,onChange:function onChange(e){return setCaption(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Meme URL \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"imageUrl\",value:imageUrl,onChange:function onChange(e){return setImageUrl(e.target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn\",children:\"Submit\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"request-error\",children:[\" \",reqError,\" \"]})]})]});};export default PatchFrom;","map":{"version":3,"sources":["/home/ubuntu/project/crio_stage_2_b/frontend-meme/src/setup/PatchForm.js"],"names":["React","useState","axios","useHistory","PatchFrom","id","caption","setCaption","imageUrl","setImageUrl","history","reqError","setReqError","url","handleSubmit","e","preventDefault","payload","console","log","patch","then","response","setTimeout","go","catch","error","status","statusText","target","value"],"mappings":"wKAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,KAA2B,kBAA3B,C,wFAEA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAAY,IAATC,CAAAA,EAAS,MAATA,EAAS,eACGJ,QAAQ,CAAC,EAAD,CADX,wCACnBK,OADmB,eACXC,UADW,8BAEKN,QAAQ,CAAC,EAAD,CAFb,yCAEnBO,QAFmB,eAEVC,WAFU,eAG1B,GAAMC,CAAAA,OAAO,CAAGP,UAAU,EAA1B,CAH0B,eAIKF,QAAQ,CAAC,EAAD,CAJb,yCAInBU,QAJmB,eAIVC,WAJU,eAM1B;AACA,GAAMC,CAAAA,GAAG,CAAG,oEAAZ,CACA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CACxBA,CAAC,CAACC,cAAF,GACA,GAAMC,CAAAA,OAAO,CAAG,CACZ,UAAUX,OADE,CAEZ,YAAYE,QAFA,CAAhB,CAIAU,OAAO,CAACC,GAAR,CAAYF,OAAZ,EAEAf,KAAK,CAACkB,KAAN,CAAYP,GAAG,CAACR,EAAhB,CAAmBY,OAAnB,EACKI,IADL,CACU,SAAAC,QAAQ,CAAI,CACdJ,OAAO,CAACC,GAAR,CAAYG,QAAZ,EACAC,UAAU,CAAC,UAAU,CACjBb,OAAO,CAACc,EAAR,CAAW,CAAX,EACH,CAFS,CAER,GAFQ,CAAV,CAGH,CANL,EAOKC,KAPL,CAOW,SAAAC,KAAK,CAAI,CACZR,OAAO,CAACC,GAAR,CAAYO,KAAK,CAACJ,QAAlB,EACAV,WAAW,CAACc,KAAK,CAACJ,QAAN,CAAeK,MAAf,CAAwB,GAAxB,CAA8BD,KAAK,CAACJ,QAAN,CAAeM,UAA9C,CAAX,CACH,CAVL,EAWH,CAnBD,CAqBA,mBACI,iBAAS,SAAS,CAAC,gBAAnB,wBACI,aAAK,SAAS,CAAC,OAAf,wBACI,kCADJ,cAEI,YAAK,SAAS,CAAC,WAAf,EAFJ,GADJ,cAKI,cAAM,QAAQ,CAAEd,YAAhB,CAA8B,SAAS,CAAC,eAAxC,wBACI,+CACY,aADZ,kBACsB,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,SAAxB,CAAkC,KAAK,CAAER,OAAzC,CAAkD,QAAQ,CAAE,kBAACS,CAAD,QAAOR,CAAAA,UAAU,CAACQ,CAAC,CAACc,MAAF,CAASC,KAAV,CAAjB,EAA5D,EADtB,GADJ,cAII,gDACa,aADb,kBACuB,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,UAAxB,CAAmC,KAAK,CAAEtB,QAA1C,CAAoD,QAAQ,CAAE,kBAACO,CAAD,QAAON,CAAAA,WAAW,CAACM,CAAC,CAACc,MAAF,CAASC,KAAV,CAAlB,EAA9D,EADvB,GAJJ,cAOI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,KAAhC,oBAPJ,cAQI,WAAG,SAAS,CAAC,eAAb,eAA+BnB,QAA/B,OARJ,GALJ,GADJ,CAkBH,CA/CD,CAiDA,cAAeP,CAAAA,SAAf","sourcesContent":["import React, { useState } from 'react';\nimport axios from 'axios';\nimport { useHistory } from 'react-router-dom';\n\nconst PatchFrom = ( {id} ) => {\n    const [caption,setCaption] = useState('');\n    const [imageUrl,setImageUrl] = useState('');\n    const history = useHistory();\n    const [reqError,setReqError] = useState('');\n\n    //const url = 'http://localhost:8000/memes/'\n    const url = 'http://ec2-3-7-45-215.ap-south-1.compute.amazonaws.com:8000/memes/'\n    const handleSubmit = (e) => {\n        e.preventDefault();\n        const payload = {\n            \"caption\":caption,\n            \"image_url\":imageUrl\n        };\n        console.log(payload);\n        \n        axios.patch(url+id,payload)\n            .then(response => {\n                console.log(response);\n                setTimeout(function(){\n                    history.go(0);\n                },500);\n            })\n            .catch(error => {\n                console.log(error.response);\n                setReqError(error.response.status + ' ' + error.response.statusText);\n            });\n    }\n\n    return (\n        <section className=\"section-center\">\n            <div className=\"title\">\n                <h2>Patch Meme</h2>\n                <div className=\"underline\"></div>\n            </div>\n            <form onSubmit={handleSubmit} className=\"smaller-input\">\n                <div>\n                    Caption <br></br> <input type=\"text\" name=\"caption\" value={caption} onChange={(e) => setCaption(e.target.value)}/>\n                </div>\n                <div>\n                    Meme URL <br></br> <input type=\"text\" name=\"imageUrl\" value={imageUrl} onChange={(e) => setImageUrl(e.target.value)}/>\n                </div>\n                <button type=\"submit\" className=\"btn\" >Submit</button>\n                <p className='request-error'> {reqError} </p>\n            </form>\n        </section>\n    );\n};\n\nexport default PatchFrom;\n"]},"metadata":{},"sourceType":"module"}